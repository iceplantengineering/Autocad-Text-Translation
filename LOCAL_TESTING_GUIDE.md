# ローカル環境での機能確認ガイド

## 🚀 クイックスタート

### 1. バックエンドサーバーの起動
```bash
cd backend
python simple_app.py
```

### 2. フロントエンドサーバーの起動
```bash
cd frontend/simple-build
python -m http.server 3000
```

### 3. 一括起動（推奨）
```bash
start_local_test.bat
```

## 📋 テスト手順

### ステップ1: サーバー起動確認
1. バックエンド: http://localhost:8000
2. フロントエンド: http://localhost:3000
3. APIヘルスチェック: http://localhost:8000/health

### ステップ2: テストファイルの準備
- テスト用DXFファイル: `test_files/test_chinese_text.dxf`
- このファイルには中国語のテキストが含まれています

### ステップ3: ファイルアップロードテスト
1. http://localhost:3000 を開く
2. 「DWGファイルを選択またはドラッグ＆ドロップ」をクリック
3. `test_chinese_text.dxf` を選択（またはDWGファイル）
4. 「アップロードして翻訳開始」をクリック

### ステップ4: 進捗確認
- 処理中... 10% → 30% → 70% → 100%
- 各ステップの進捗がリアルタイムで表示されます

### ステップ5: 結果確認
- 翻訳完了後、ダウンロードボタンが表示されます
- 「翻訳済みファイルをダウンロード」をクリック
- ダウンロードしたファイルを確認

## 🔧 テスト環境の特徴

### バックエンド機能
- ✅ ファイルアップロード
- ✅ 中国語テキスト抽出
- ✅ モック翻訳サービス（APIキー不要）
- ✅ テキスト置換
- ✅ 進捗追跡
- ✅ ファイルダウンロード

### フロントエンド機能
- ✅ 日本語UI
- ✅ ファイルドラッグ＆ドロップ
- ✅ リアルタイム進捗表示
- ✅ エラーハンドリング
- ✅ レスポンシブデザイン

### モック翻訳サービス
以下の中国語→日本語翻訳がテストできます：
```
图层 → レイヤー
块 → ブロック
标注 → 寸法
文字 → テキスト
平面图 → 平面図
混凝土 → コンクリート
柱 → 柱
梁 → 梁
等等...
```

## 🧪 テストケース

### ケース1: 正常系
1. 中国語テキストを含むDWG/DXFファイルをアップロード
2. 進捗が正常に進むことを確認
3. 翻訳完了後、ファイルがダウンロードできること

### ケース2: エラー系
1. DWG以外のファイルをアップロード
2. エラーメッセージが表示されること

### ケース3: 空ファイル
1. 中国語テキストを含まないファイルをアップロード
2. 「翻訳不要」として処理されること

## 📊 APIエンドポイント

| エンドポイント | メソッド | 説明 |
|---|---|---|
| `/` | GET | API情報 |
| `/health` | GET | ヘルスチェック |
| `/upload` | POST | ファイルアップロード |
| `/jobs/{job_id}` | GET | ジョブステータス |
| `/download/{job_id}` | GET | ファイルダウンロード |
| `/jobs` | GET | ジョブ一覧 |

## 🛠️ デバッグ方法

### バックエンドのログ確認
ターミナルに処理の詳細が表示されます

### フロントエンドのデバッグ
- ブラウザの開発者ツールを開く
- NetworkタブでAPI通信を確認
- Consoleタブでエラーを確認

### ファイル確認
- アップロードされたファイル: `backend/uploads/`
- 処理済みファイル: `backend/processed/`

## ⚠️ 注意事項

1. **DWG変換**: 本システムではDWGをDXFに変換して処理します
2. **変換ツール**: ODA File ConverterまたはAutoCADが必要です
3. **テスト環境**: あくまでテスト用のモックサービスです
4. **ファイルサイズ**: 大容量ファイルのテストには注意してください

## 📝 本番環境への移行

1. APIキーの設定（.envファイル）
2. バックエンドのデプロイ
3. フロントエンドのAPI URL更新
4. セキュリティ設定の有効化

## 🎯 次のステップ

1. ✅ ローカルテスト環境の構築完了
2. 🔄 実際のDWGファイルでのテスト
3. 🔄 翻訳APIキーの設定
4. 🔄 クラウド環境へのデプロイ

このガイドに従って、まずはローカル環境でアプリケーションの動作を確認してください！